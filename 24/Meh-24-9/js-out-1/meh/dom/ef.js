import { leaf } from "../model/leaf.js";
import { defs } from "./defs.js";
import * as nodet from "./nodet.js";
function create_element(ns, type, first, ...remain) {
    if (first instanceof leaf.r.Leaf ||
        first instanceof nodet.Nodet ||
        first instanceof defs.Place ||
        first instanceof Node ||
        typeof first == "string" ||
        typeof first == "number" ||
        typeof first == "boolean") {
        const parts = (remain !== undefined ? [first, ...remain]
            : [first]);
        return new nodet.Element({ ns, type, parts });
    }
    return new nodet.Element({ ns, type, ...first, parts: remain });
}
class Handler {
    ns;
    constructor(ns) {
        this.ns = ns;
    }
    get(target, type) {
        return this.makefn(type);
    }
    fns = new Map;
    makefn(type) {
        if (this.fns.has(type))
            return this.fns.get(type);
        const fn = (first, ...remain) => create_element(this.ns, type, first, ...remain);
        this.fns.set(type, fn);
        return fn;
    }
}
export const ef = new Proxy({}, new Handler(""));
export const sf = new Proxy({}, new Handler("http://www.w3.org/2000/svg"));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWYuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi90cy1zcmMvbWVoL2RvbS9lZi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDeEMsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNqQyxPQUFPLEtBQUssS0FBSyxNQUFNLFlBQVksQ0FBQztBQUVwQyxTQUFTLGNBQWMsQ0FFdEIsRUFBVyxFQUNYLElBQWEsRUFDYixLQUFxQyxFQUNyQyxHQUFJLE1BQW1CO0lBR3ZCLElBRUMsS0FBSyxZQUFZLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUM1QixLQUFLLFlBQVksS0FBSyxDQUFDLEtBQUs7UUFDNUIsS0FBSyxZQUFZLElBQUksQ0FBQyxLQUFLO1FBQzNCLEtBQUssWUFBWSxJQUFJO1FBQ3JCLE9BQU8sS0FBSyxJQUFJLFFBQVE7UUFDeEIsT0FBTyxLQUFLLElBQUksUUFBUTtRQUN4QixPQUFPLEtBQUssSUFBSSxTQUFTLEVBRTFCO1FBQ0MsTUFBTSxLQUFLLEdBQ1gsQ0FDQyxNQUFNLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFFLEtBQUssRUFBRSxHQUFJLE1BQU0sQ0FBRTtZQUM1QyxDQUFDLENBQUMsQ0FBRSxLQUFLLENBQUUsQ0FDWCxDQUFDO1FBRUYsT0FBTyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFFLENBQUM7S0FDaEQ7SUFFRCxPQUFPLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBSSxLQUFLLEVBQUUsS0FBSyxFQUFHLE1BQU0sRUFBRSxDQUFFLENBQUM7QUFDckUsQ0FBQztBQVNELE1BQU0sT0FBTztJQUVTO0lBQXJCLFlBQXFCLEVBQVc7UUFBWCxPQUFFLEdBQUYsRUFBRSxDQUFTO0lBQy9CLENBQUM7SUFFSyxHQUFHLENBQUUsTUFBVSxFQUFFLElBQWE7UUFFcEMsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFFLElBQUksQ0FBRSxDQUFDO0lBQzVCLENBQUM7SUFFTyxHQUFHLEdBQUcsSUFBSSxHQUFzQyxDQUFFO0lBRWxELE1BQU0sQ0FBRSxJQUFhO1FBRTVCLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUUsSUFBSSxDQUFFO1lBQUksT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBRSxJQUFJLENBQUUsQ0FBQztRQUV4RCxNQUFNLEVBQUUsR0FBNEIsQ0FBRSxLQUFLLEVBQUUsR0FBSSxNQUFNLEVBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBRSxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBSSxNQUFNLENBQUUsQ0FBQztRQUNoSCxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBRSxJQUFJLEVBQUUsRUFBRSxDQUFFLENBQUM7UUFDekIsT0FBTyxFQUFFLENBQUM7SUFDWCxDQUFDO0NBQ0Q7QUFRRCxNQUFNLENBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxLQUFLLENBRTFCLEVBQWtDLEVBQ2xDLElBQUksT0FBTyxDQUFFLEVBQUUsQ0FBRSxDQUNqQixDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sRUFBRSxHQUFHLElBQUksS0FBSyxDQUUxQixFQUFpQyxFQUNqQyxJQUFJLE9BQU8sQ0FBRSw0QkFBNEIsQ0FBRSxDQUMzQyxDQUFDIn0=