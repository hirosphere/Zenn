import { Leaf, Lian, ef, each, } from "../meh/index.js";
import * as eki from "../raildata/eki.js";
const log = console.log;
// Model //
var Model;
(function (Model) {
    class App {
        lines = ["埼京線", "山手線", "京浜東北線", "総武線各駅停車", "中央線"].map(name => eki.lines[name]);
        history = new Lian();
        evmon = new Leaf.String("evmon");
        shuffle() {
        }
    }
    Model.App = App;
})(Model || (Model = {}));
const arrnd = (ar) => Math.floor(Math.random() * ar.length);
// UI //
const { div, h2, h3, span, button, b, table, thead, tbody, tr, td, br, p } = ef;
export const Lian1Applet = (app = new Model.App) => {
    document.addEventListener("mouseup", () => app.evmon.set("mouseup"));
    return div({ class: "applet lian-1" }, h2("Lian-1 Applet"), div({ class: "applet-body " }, div({ class: "cols-3", actActs: { dblclick(ev) { app.evmon.set("dblclk"); } } }, div({ class: "stations" }, each(app.lines, line => Line(app, line)))), div(app.evmon), div({ class: "cols-3" }, h3("椅子取 history"), div(button({ acts: { click() { app.history.clear(); } } }, "全消去"), " ", span(app.history.vlength, "駅")), div({ class: "stations" }, History(app)))));
};
const Line = (app, line) => {
    const stations = Lian.create(line.stations);
    const action = (station) => app.history.add(station, 0);
    return span({ class: "line" }, b(line.name), each(stations, o => button({ acts: { mouseover: () => action(o.val) } }, o.pos.cv(v => 1 + v + ""), " ", o.val.name)));
};
const History = (mo) => {
    return div({ class: "line" }, table(tbody(each(mo.history, o => HistoryRow(o)))));
};
const HistoryRow = (o) => {
    const st = o.v;
    return tr(td(o.pos), td(st.postal), td(st.name), td(st.line, "-", st.pos + 1), td(st.lat), td(st.long), td(button({ acts: { mouseout: () => o.remove() } }, "R")));
};
const HistoryButton = (o) => {
    const act = () => o.remove();
    return button({ acts: { mouseleave: act } }, o.pos, " ", span({ style: { color: "red" } }, o.val.line, " ", o.val.pos + 1, " ", o.val.name));
};
export const Lian1 = { UI: Lian1Applet };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlhbjFhcHAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi90cy1zcmMvYXBwbGV0cy9saWFuMWFwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBUyxFQUFFLEVBQUUsSUFBSSxHQUFHLE1BQU0saUJBQWlCLENBQUM7QUFDL0QsT0FBTyxLQUFLLEdBQUcsTUFBTSxvQkFBb0IsQ0FBQztBQUMxQyxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDO0FBRXhCLFdBQVc7QUFFWCxJQUFVLEtBQUssQ0FhZDtBQWJELFdBQVUsS0FBSztJQUVkLE1BQWEsR0FBRztRQUVmLEtBQUssR0FBRyxDQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLENBQUUsQ0FBQyxHQUFHLENBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFFLElBQUksQ0FBRSxDQUFFLENBQUM7UUFDckUsT0FBTyxHQUFHLElBQUksSUFBSSxFQUFtQixDQUFDO1FBRXRELEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUUsT0FBTyxDQUFFLENBQUM7UUFFbkMsT0FBTztRQUVQLENBQUM7S0FDRDtJQVZZLFNBQUcsTUFVZixDQUFBO0FBQ0YsQ0FBQyxFQWJTLEtBQUssS0FBTCxLQUFLLFFBYWQ7QUFJRCxNQUFNLEtBQUssR0FBRyxDQUFFLEVBQWtCLEVBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUUsQ0FBQztBQUVoRixRQUFRO0FBRVIsTUFBTSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVB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