import { sf, each, Leaf } from "../meh/index.js";
import { Applet } from "./applet.js";
const log = console.log;
function loop(count, createItem) {
    const rt = new Array;
    for (let i = 0; i < count; i++)
        rt.push(createItem(i));
    return rt;
}
var models;
(function (models) {
    class Shape {
        color;
        pos;
        constructor(value) {
            this.color = new HSL(value.color);
            this.pos = new Pos(value.pos);
        }
    }
    models.Shape = Shape;
    class HSL {
        h;
        s;
        l;
        css;
        constructor(value) {
            const rel = () => this.update();
            this.h = new Leaf.Number(value.h, { rel });
            this.s = new Leaf.Number(value.s, { rel });
            this.l = new Leaf.Number(value.l, { rel });
            this.css = new Leaf.String("");
            this.update();
        }
        update() {
            this.css.v = `hsl( ${this.h.val}, ${this.s.val * 100}%, ${this.l.val * 100}%`;
        }
    }
    models.HSL = HSL;
    class Pos {
        x;
        y;
        constructor(value) {
            this.x = new Leaf.Number(value.x);
            this.y = new Leaf.Number(value.y);
        }
    }
    models.Pos = Pos;
})(models || (models = {}));
export const ColorApp1 = () => {
    const svg = sf.svg({ attrs: { width: 800, height: 500 } }, Colors());
    return Applet({ title: "Color 1", content: [svg] });
};
const Colors = () => {
    const c = sf.circle({ attrs: { fill: "hsl( 95, 70%, 70% )", cx: 70, cy: 70, r: 5 } });
    const d = Circle({ color: { h: 240, s: 0.7, l: 0.6 }, pos: { x: 200, y: 70 } });
    const shapes = loop(6, i => ({
        color: { h: 120 + i * 30, s: 0.7, l: 0.7 },
        pos: { x: 50 + i * 60, y: 50 }
    }));
    return sf.g(each(shapes, shape => Circle(shape)));
};
const Circle = (value) => {
    const model = new models.Shape(value);
    log("Circle", model.color.css.val);
    return sf.circle({ attrs: { fill: model.color.css, cx: model.pos.x, cy: model.pos.y, r: 20 } });
};
const Item = () => {
    ;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sb3IxLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vdHMtc3JjL2FwcGxldHMvY29sb3IxLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3JELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDckMsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQztBQUV4QixTQUFTLElBQUksQ0FBUyxLQUFjLEVBQUUsVUFBb0M7SUFFekUsTUFBTSxFQUFFLEdBQUcsSUFBSSxLQUFXLENBQUM7SUFDM0IsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLEVBQUc7UUFBSSxFQUFFLENBQUMsSUFBSSxDQUFFLFVBQVUsQ0FBRSxDQUFDLENBQUUsQ0FBRSxDQUFDO0lBQzlELE9BQU8sRUFBRSxDQUFDO0FBQ1gsQ0FBQztBQUVELElBQVUsTUFBTSxDQWlEZjtBQWpERCxXQUFVLE1BQU07SUFFZixNQUFhLEtBQUs7UUFFRCxLQUFLLENBQUM7UUFDTixHQUFHLENBQUM7UUFFcEIsWUFBYSxLQUFlO1lBRTNCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUUsS0FBSyxDQUFDLEtBQUssQ0FBRSxDQUFDO1lBQ3BDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBRSxDQUFDO1FBQ2pDLENBQUM7S0FDRDtJQVZZLFlBQUssUUFVakIsQ0FBQTtJQUVELE1BQWEsR0FBRztRQUVmLENBQUMsQ0FBRTtRQUFDLENBQUMsQ0FBRTtRQUFDLENBQUMsQ0FBRTtRQUNYLEdBQUcsQ0FBRTtRQUVMLFlBQWEsS0FBYTtZQUV6QixNQUFNLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENB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