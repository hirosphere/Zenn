import { Leaf, Index } from "./index.js";
const log = console.log;
//  //
export class Select {
    current;
    get root() { return this._root; }
    constructor(optdef) {
        this.current = new Leaf(null, { rel: this.update });
        this._root = this.createOption(optdef);
    }
    _root = null;
    //
    createOption(def) {
        if (!def)
            return null;
        return new Option(this, undefined, def);
    }
    //
    setCurrent(option) {
        this.current.val = option;
    }
    update(newitem, olditem) {
        olditem?.selected.set(false);
        newitem?.selected.set(true);
    }
}
(function (Select) {
    Select.fromLabels = (labels) => {
        const def = { value: "", parts: labels.map(value => ({ value })) };
        return new Select(def);
    };
})(Select || (Select = {}));
//  //
export class Option extends Index {
    selector;
    def;
    value;
    selected = new Leaf.Boolean(false);
    constructor(selector, orderOwner, def) {
        super(orderOwner);
        this.selector = selector;
        this.def = def;
        this.value = def.value;
        def.parts && this.parts.addOrders(def.parts.map(def => this.createPart(def)));
    }
    createPart(def) {
        return new Option(this.selector, this.parts, def);
    }
    //
    select() {
        this.selector?.setCurrent(this);
    }
    terminate() {
        this.selector = null;
        super.terminate();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vdHMtc3JjL21laC9tb2RlbC9zZWxlY3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBb0IsS0FBSyxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBQzNELE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFheEIsTUFBTTtBQUVOLE1BQU0sT0FBTyxNQUFNO0lBRUYsT0FBTyxDQUEyQjtJQUNsRCxJQUFXLElBQUksS0FBMkIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUU5RCxZQUFhLE1BQTRCO1FBRXhDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQTJCLElBQUksRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUUsQ0FBQztRQUMvRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUUsTUFBTSxDQUFFLENBQUM7SUFDMUMsQ0FBQztJQUVTLEtBQUssR0FBeUIsSUFBSSxDQUFFO0lBRTlDLEVBQUU7SUFFSyxZQUFZLENBQUUsR0FBeUI7UUFFN0MsSUFBSSxDQUFFLEdBQUc7WUFBRyxPQUFPLElBQUksQ0FBQztRQUV4QixPQUFPLElBQUksTUFBTSxDQUFTLElBQUksRUFBRSxTQUFTLEVBQUUsR0FBRyxDQUFFLENBQUM7SUFDbEQsQ0FBQztJQUVELEVBQUU7SUFFSyxVQUFVLENBQUUsTUFBNEI7UUFFOUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDO0lBQzNCLENBQUM7SUFFUyxNQUFNLENBQUUsT0FBdUIsRUFBRSxPQUF5QjtRQUVuRSxPQUFPLEVBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBRSxLQUFLLENBQUUsQ0FBQztRQUMvQixPQUFPLEVBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBRSxJQUFJLENBQUUsQ0FBQztJQUMvQixDQUFDO0NBQ0Q7QUFJRCxXQUFpQixNQUFNO0lBRVQsaUJBQVUsR0FBRyxDQUFFLE1BQWtCLEVBQUcsRUFBRTtRQUVsRCxNQUFNLEdBQUcsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBRSxFQUFFLENBQUM7UUFDckUsT0FBTyxJQUFJLE1BQU0sQ0FBYyxHQUFHLENBQUUsQ0FBQztJQUN0QyxDQUFDLENBQUM7QUFDSCxDQUFDLEVBUGdCLE1BQU0sS0FBTixNQUFNLFFBT3RCO0FBRUQsTUFBTTtBQUVOLE1BQU0sT0FBTyxNQUFtQixTQUFRLEtBQWdCO0lBTTVDO0lBRU07SUFORCxLQUFLLENBQU07SUFDWCxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFFLEtBQUssQ0FBRSxDQUFFO0lBRXRELFlBQ1csUUFBOEIsRUFDeEMsVUFBNkIsRUFDYixHQUF1QjtRQUV2QyxLQUFLLENBQUUsVUFBVSxDQUFFLENBQUM7UUFKVixhQUFRLEdBQVIsUUFBUSxDQUFzQjtRQUV4QixRQUFHLEdBQUgsR0FBRyxDQUFvQjtRQUl2QyxJQUFJLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUM7UUFDdkIsR0FBRyxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBRSxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBRSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUUsR0FBRyxDQUFFLENBQUUsQ0FBRSxDQUFDO0lBQ3JGLENBQUM7SUFFUyxVQUFVLENBQUUsR0FBdUI7UUFFNUMsT0FBTyxJQUFJLE1BQU0sQ0FBRSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFFLENBQUM7SUFDckQsQ0FBQztJQUVELEVBQUU7SUFFSyxNQUFNO1FBRVosSUFBSSxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUUsSUFBSSxDQUFFLENBQUM7SUFDbkMsQ0FBQztJQUVELFNBQVM7UUFFUixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUNyQixLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDbkIsQ0FBQztDQUNEIn0=