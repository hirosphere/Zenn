import { Leaf, LianBase, OrderBase } from "./index.js";
const log = console.log;
//  //
export class Select {
    current;
    options = new Options(this);
    constructor(vals) {
        this.current = new Leaf(null, { rel: this.update });
        vals && this.options.addValues(vals);
    }
    setCurrent(option) {
        this.current.val = option;
    }
    update(newitem, olditem) {
        log("sel", newitem?.value, olditem?.value);
        olditem?.selected.set(false);
        newitem?.selected.set(true);
    }
}
//  //
class Options extends LianBase {
    selector;
    constructor(selector) {
        super();
        this.selector = selector;
    }
    addValues(vals) {
        this.addOrders(vals.map(val => new Option(this, this.selector, val)));
    }
    terminate() {
        this.selector = null;
        super.terminate();
    }
}
//  //
export class Option extends OrderBase {
    selector;
    value;
    selected = new Leaf.Boolean(false);
    constructor(orderOwner, selector, value) {
        super(orderOwner);
        this.selector = selector;
        this.value = value;
    }
    select() {
        this.selector?.setCurrent(this);
    }
    terminate() {
        this.selector = null;
        super.terminate();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vdHMtc3JjL21laC9tb2RlbC9zZWxlY3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBYyxRQUFRLEVBQVMsU0FBUyxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBQzFFLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFFeEIsTUFBTTtBQUVOLE1BQU0sT0FBTyxNQUFNO0lBRUYsT0FBTyxDQUEyQjtJQUNsQyxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQVMsSUFBSSxDQUFFLENBQUM7SUFFckQsWUFBYSxJQUFhO1FBRXpCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQTJCLElBQUksRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUUsQ0FBQztRQUUvRSxJQUFJLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUUsSUFBSSxDQUFFLENBQUM7SUFDeEMsQ0FBQztJQUVNLFVBQVUsQ0FBRSxNQUE0QjtRQUU5QyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUM7SUFDM0IsQ0FBQztJQUVTLE1BQU0sQ0FBRSxPQUF1QixFQUFFLE9BQXlCO1FBRW5FLEdBQUcsQ0FBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFFLENBQUM7UUFFN0MsT0FBTyxFQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUUsS0FBSyxDQUFFLENBQUM7UUFDL0IsT0FBTyxFQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUUsSUFBSSxDQUFFLENBQUM7SUFDL0IsQ0FBQztDQUNEO0FBSUQsTUFBTTtBQUVOLE1BQU0sT0FBYyxTQUFRLFFBQXlCO0lBRTdCO0lBQXZCLFlBQXVCLFFBQThCO1FBRXBELEtBQUssRUFBRSxDQUFDO1FBRmMsYUFBUSxHQUFSLFFBQVEsQ0FBc0I7SUFHckQsQ0FBQztJQUVNLFNBQVMsQ0FBRSxJQUFXO1FBRTVCLElBQUksQ0FBQyxTQUFTLENBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBRSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksTUFBTSxDQUFFLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBRSxDQUFFLENBQUUsQ0FBQztJQUM3RSxDQUFDO0lBRU0sU0FBUztRQUVmLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUNuQixDQUFDO0NBQ0Q7QUFFRCxNQUFNO0FBRU4sTUFBTSxPQUFPLE1BQWEsU0FBUSxTQUFTO0lBTS9CO0lBQ007SUFMRCxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFFLEtBQUssQ0FBRSxDQUFDO0lBRXJELFlBQ0MsVUFBMEIsRUFDaEIsUUFBOEIsRUFDeEIsS0FBUztRQUV6QixLQUFLLENBQUUsVUFBVSxDQUFFLENBQUM7UUFIVixhQUFRLEdBQVIsUUFBUSxDQUFzQjtRQUN4QixVQUFLLEdBQUwsS0FBSyxDQUFJO0lBRzFCLENBQUM7SUFFTSxNQUFNO1FBRVosSUFBSSxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUUsSUFBSSxDQUFFLENBQUM7SUFDbkMsQ0FBQztJQUVELFNBQVM7UUFFUixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUNyQixLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDbkIsQ0FBQztDQUNEIn0=