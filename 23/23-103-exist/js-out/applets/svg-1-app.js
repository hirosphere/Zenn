import { ef, sf, each, Leaf, Lian, Order } from "../meh/index.js";
import { Range } from "../gui/range.js";
const log = console.log;
//  //
export const SVG1App = () => {
    const app = new models.App();
    const svg = sf.svg({
        attrs: { width: 500, height: 300, viewBox: "-250 -150 500 300" },
        style: { width: "100%", border: "3px solid hsl( 45, 4%, 94% )" },
    }, Colors(app.phase));
    return ef.article({ class: "applet" }, ef.h2("Color-1"), ef.div({ style: { display: "flex", flexDirection: "column", alignItems: "center" } }, svg, Control(app.phase)));
};
const Control = (mo) => {
    return ef.section(Range.UI({ title: "Arc", value: mo.arc, max: 72, step: 1 }), Range.UI({ title: "Start", value: mo.start, max: 360, step: 5 }), Range.UI({ title: "Span", value: mo.span, max: 360, step: 5 }));
};
const Colors = (mo) => {
    return sf.g(each(mo.shapes, shape => Circle(shape)));
};
const Circle = (model) => {
    log("Circle", model.color.css.val, model.posit.x.val);
    return sf.circle({
        attrs: { fill: model.color.css, cx: model.posit.x, cy: model.posit.y, r: 20 },
        acts: { click() { log(model.color.css.val); } }
    });
};
const Item = () => {
    ;
};
//  //
function loop(count, createItem) {
    const rt = new Array;
    for (let i = 0; i < count; i++)
        rt.push(createItem(i));
    return rt;
}
var models;
(function (models) {
    class App {
        phase = new Phase();
    }
    models.App = App;
    class Phase {
        arc = new Leaf.Number(9, { rel: () => this.update() });
        start = new Leaf.Number(90, { rel: () => this.update() });
        span = new Leaf.Number(120, { rel: () => this.update() });
        shapes = new Lian();
        constructor() {
            this.update();
        }
        update() {
            const nodect = this.arc.val + 1;
            const diffct = nodect - this.shapes.length;
            if (diffct > 0)
                this.shapes.insert(() => new Shape(), diffct);
            else
                this.shapes.removeOrders(nodect, -diffct);
            for (let i = 0; i <= this.arc.val; i++) {
                const arc = this.arc.v;
                const pos = arc ? (400 * i / arc) - 200 : 0;
                const hue = this.start.v + this.span.v * (arc ? i / arc : 0);
                const shape = this.shapes[i];
                shape.color.h.v = hue;
                shape.posit.x.v = pos;
            }
        }
    }
    models.Phase = Phase;
    class Shape extends Order {
        color;
        posit;
        constructor(value) {
            super();
            this.color = new HSL(value?.color);
            this.posit = new Pos(value?.pos);
        }
    }
    models.Shape = Shape;
    class HSL {
        h;
        s;
        l;
        css;
        constructor(value = { h: 210, s: 0.65, l: 0.65 }) {
            const rel = () => this.update();
            this.h = new Leaf.Number(value.h, { rel });
            this.s = new Leaf.Number(value.s, { rel });
            this.l = new Leaf.Number(value.l, { rel });
            this.css = new Leaf.String("");
            this.update();
        }
        update() {
            this.css.v = `hsl( ${this.h.val}, ${this.s.val * 100}%, ${this.l.val * 100}%`;
        }
    }
    models.HSL = HSL;
    class Pos {
        x;
        y;
        constructor(value) {
            this.x = new Leaf.Number(value?.x ?? 0);
            this.y = new Leaf.Number(value?.y ?? 0);
        }
    }
    models.Pos = Pos;
})(models || (models = {}));
//  //
var Quest;
(function (Quest) {
    const createBranchClass = (srcproto) => {
        const newproto = {};
        return newproto;
    };
})(Quest || (Quest = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ZnLTEtYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vdHMtc3JjL2FwcGxldHMvc3ZnLTEtYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN4QyxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDO0FBR3hCLE1BQU07QUFFTixNQUFNLENBQUMsTUFBTSxPQUFPLEdBQUcsR0FBRyxFQUFFO0lBRTNCLE1BQU0sR0FBRyxHQUFHLElBQUksTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBRTdCLE1BQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakIsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxtQkFBbUIsRUFBRTtRQUNoRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSw4QkFBOEIsRUFBRTtLQUNoRSxFQUNELE1BQU0sQ0FBRSxHQUFHLENBQUMsS0FBSyxDQUFFLENBQ25CLENBQUM7SUFFRixPQUFPLEVBQUUsQ0FBQyxPQUFPLENBQUUsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQ3JDLEVBQUUsQ0FBQyxFQUFFLENBQUUsU0FBUyxDQUFFLEVBQ2xCLEVBQUUsQ0FBQyxHQUFHLENBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLGFBQWEsRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQ3BGLEdBQUcsRUFDSCxPQUFPLENBQUUsR0FBRyxDQUFDLEtBQUssQ0FBRSxDQUNwQixDQUNELENB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QUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBRSxDQUFDO1FBRTVELE1BQU0sR0FBRyxJQUFJLElBQUksRUFBYSxDQUFDO1FBRS9DO1lBRUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2YsQ0FBQztRQUVELE1BQU07WUFFTCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7WUFDaEMsTUFBTSxNQUFNLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO1lBQzNDLElBQUksTUFBTSxHQUFHLENBQUM7Z0JBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxLQUFLLEVBQUUsRUFBRSxNQUFNLENBQUUsQ0FBQzs7Z0JBQzVELElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFFLE1BQU0sRUFBRSxDQUFFLE1BQU0sQ0FBRSxDQUFDO1lBR2xELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUcsRUFDdkM7Z0JBQ0MsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZCLE1BQU0sR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBRSxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM5QyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFFLENB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