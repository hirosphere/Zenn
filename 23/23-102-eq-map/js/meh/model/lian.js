// class Lian ( 連：リエン・れん ) Arrayをリアクティブにするクラス //
export class Lian extends Array {
    refs = new Set();
    ref(update) {
        this.refs.add(update);
    }
    add(item, order) {
        order = Math.min(order ?? this.length, this.length);
        this.splice(order, 0, item);
    }
    splice(start, deleteCount, ...newItems) {
        const rt = super.splice(start, deleteCount, ...newItems);
        this.refs.forEach(update => update(start, rt.length, newItems?.length ?? 0));
        return rt;
    }
}
(function (Lian) {
    class Ref {
        updateOper;
        constructor(updateOper) {
            this.updateOper = updateOper;
        }
        update(start, remove, add) {
            this.updateOper(start, remove, add);
        }
    }
    Lian.Ref = Ref;
})(Lian || (Lian = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlhbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3RzLXNyYy9tZWgvbW9kZWwvbGlhbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxnREFBZ0Q7QUFJaEQsTUFBTSxPQUFPLElBQVcsU0FBUSxLQUFXO0lBRWhDLElBQUksR0FBRyxJQUFJLEdBQUcsRUFBYyxDQUFDO0lBRWhDLEdBQUcsQ0FBRSxNQUFlO1FBRTFCLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFFLE1BQU0sQ0FBRSxDQUFDO0lBQ3pCLENBQUM7SUFFTSxHQUFHLENBQUUsSUFBUSxFQUFFLEtBQWdCO1FBRXJDLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFFLEtBQUssSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUUsQ0FBQztRQUN0RCxJQUFJLENBQUMsTUFBTSxDQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFFLENBQUM7SUFDL0IsQ0FBQztJQUVNLE1BQU0sQ0FBRSxLQUFhLEVBQUUsV0FBbUIsRUFBRSxHQUFHLFFBQWE7UUFFbEUsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLEdBQUksUUFBUSxDQUFFLENBQUM7UUFDNUQsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxNQUFNLEVBQUMsUUFBUSxFQUFFLE1BQU0sSUFBSSxDQUFDLENBQUcsQ0FBRSxDQUFDO1FBQ2pGLE9BQU8sRUFBRSxDQUFDO0lBQ1gsQ0FBQztDQUNEO0FBRUQsV0FBaUIsSUFBSTtJQUVwQixNQUFhLEdBQUc7UUFFUTtRQUF2QixZQUF1QixVQUFtQjtZQUFuQixlQUFVLEdBQVYsVUFBVSxDQUFTO1FBQUksQ0FBQztRQUUvQyxNQUFNLENBQUUsS0FBYyxFQUFFLE1BQWUsRUFBRSxHQUFZO1lBRXBELElBQUksQ0FBQyxVQUFVLENBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLENBQUUsQ0FBQztRQUN2QyxDQUFDO0tBQ0Q7SUFSWSxRQUFHLE1BUWYsQ0FBQTtBQUNGLENBQUMsRUFYZ0IsSUFBSSxLQUFKLElBQUksUUFXcEIifQ==