import { Leaf, leaf, ef, Lian, defs } from "../meh/index.js";
import { sitepub } from "./sitepub_all_utf8.js";
import { Range } from "../range.js";
const log = console.log;
const clip = (value, min, max) => Math.max(min, Math.min(max, value));
const pxRatio = 100;
// Model //
var Model;
(function (Model) {
    class Map {
        // パラメータ //
        current = new Leaf(null);
        zoom;
        center;
        //  //
        hover = new Leaf(null);
        hoverInfo = new Leaf.String("");
        currentInfo = new Leaf.String("");
        hoverList = new Lian;
        currentList = new Lian;
        scrollCSS = leaf.string("");
        zoomCSS = leaf.string("");
        // 固定値 //
        lat = { max: 45.5132, min: 24.3413 };
        long = { max: 145.8026, min: 123.7798 };
        //  //
        constructor() {
            const rel = () => this.update();
            this.zoom = new Leaf.Number(5, { rel });
            this.center = new Leaf({ lat: 36.0, long: 139.0 }, { rel });
            this.hover.ref(() => this.updateHover());
            this.current.ref((newItem, oldItem) => this.updateCurrent(newItem, oldItem));
            rel();
        }
        update() {
            const scale = this.zoomScale;
            const tlx = -this.longToPx(this.center.value.long) + "px";
            const tly = -this.latToPx(this.center.value.lat) + "px";
            this.scrollCSS.value = `translate( ${tlx}, ${tly} )`;
            this.zoomCSS.value = `scale( ${scale}, ${scale} )`;
        }
        updateHover() {
            const site = this.hover.value;
            this.hoverInfo.value = Site.info(site);
            site && this.hoverList.add(site);
            log("hoverList", this.hoverList.length);
        }
        updateCurrent(newItem, oldItem) {
            this.currentInfo.value = Site.info(newItem);
            log({ new: newItem?.code, old: oldItem?.code });
            oldItem && (oldItem.selected.value = false);
            newItem && (newItem.selected.value = true);
        }
        cssPos(site) {
            const left = this.longToPx(site.long) + "px";
            const top = this.latToPx(site.lat) + "px";
            return { left, top };
        }
        latToPx(lat) { return (this.lat.max - lat) * pxRatio; }
        longToPx(long) { return (long - this.long.min) * pxRatio; }
        get zoomScale() { return 0.1 * Math.pow(10, this.zoom.value / 5); }
    }
    Model.Map = Map;
    //
    class Site {
        src;
        selected = leaf.boolean(false);
        constructor(src) {
            this.src = src.split(",");
        }
        get code() { return this.src[0]; }
        get name() { return this.src[1]; }
        get nameR() { return this.src[2]; }
        get lat() { return Number(this.src[3]); }
        get long() { return Number(this.src[4]); }
        get elev() { return Number(this.src[5]); }
        get depth() { return Number(this.src[6]); }
        static info(site) {
            return site && `${site.code} ${site.name} ${site.nameR}` || "-";
        }
        static list = sitepub.split("\n").map(csv => new Site(csv));
    }
    Model.Site = Site;
    ;
    log("sitecount", Site.list.length);
})(Model || (Model = {}));
// UI //
var UI;
(function (UI) {
    const { div, h2, h3, textarea, } = ef;
    const Site = (site, map) => {
        const { left, top } = map.cssPos(site);
        return div({
            class: ["map-site", { selected: site.selected }],
            style: { left, top },
            attrs: { selected: site.selected },
            acts: {
                mouseover() {
                    map.hover.value = site;
                },
                click() {
                    map.current.value = site;
                },
            }
        });
    };
    //
    class ZoomWork {
        map;
        wheelMon = new Leaf.String("");
        wheelZoom;
        touchMon = new Leaf.String("");
        constructor(map) {
            this.map = map;
            this.wheelZoom = map.zoom.value;
        }
        putWheelEvent(ev) {
            if (!ev.cancelable)
                return;
            const mode = (ev.deltaY % 1 ? "zoom" : "scroll");
            this.wheelMon.value = `${mode} ${ev.deltaX} ${ev.deltaY}`;
            if (mode == "zoom") {
                const zoom = this.wheelZoom + ev.deltaY * -0.1;
                this.wheelZoom = Math.min(10, Math.max(0, zoom));
                this.map.zoom.value = Math.round(this.wheelZoom);
            }
            else // mode == "scroll"
                this.scroll(ev.deltaX, ev.deltaY);
            ev.preventDefault();
        }
        putTouchEvent(ev) {
            const t0 = ev.touches[0];
            this.touchMon.value = `${ev.touches.length} ${t0.clientX} ${t0.clientY}, ${ev.target?.constructor.name} }`;
            if (ev.cancelable)
                ev.preventDefault();
        }
        scroll(deltaX, deltaY) {
            const center = this.map.center.value;
            const scale = 0.01 / this.map.zoomScale;
            const long = clip(center.long + deltaX * scale, this.map.long.min, this.map.long.max);
            const lat = clip(center.lat - deltaY * scale, this.map.lat.min, this.map.lat.max);
            this.map.center.value = { lat, long };
        }
    }
    const MapFrame = (model, zoom_wk) => {
        const content = div({
            class: "map-content",
            style: { transform: model.scrollCSS }
        }, ...Model.Site.list.map(siteInfo => Site(siteInfo, model)));
        const zoomFrame = div({
            class: "map-zoom",
            style: { transform: model.zoomCSS }
        }, content);
        const wheel = (ev) => zoom_wk.putWheelEvent(ev);
        const touchmove = (ev) => zoom_wk.putTouchEvent(ev);
        const opt = { passive: false };
        return div({
            class: "map-frame",
            optActs: { wheel: [wheel, opt], touchmove: [touchmove, opt] }
        }, div(), div(), div(), zoomFrame);
    };
    UI.Map = () => {
        const model = new Model.Map;
        const lianMon = new Leaf.String("");
        const zoom_wk = new ZoomWork(model);
        model.hoverList.ref(() => {
            const lian = model.hoverList;
            const list = lian.slice(-130).map(site => `${site.name}`);
            lianMon.value = "" + lian.length + " " + list.join(", ");
        });
        return div({ class: "map applet" }, h2("EQ Site Map"), div({ class: "map-cur-site" }, model.currentInfo), MapFrame(model, zoom_wk), div({ class: "hover-info" }, model.hoverInfo), div(Range.UI({ title: "拡大", value: model.zoom, max: 10 })), div("Wheel", " ", zoom_wk.wheelMon), div("Touch", " ", zoom_wk.touchMon), h3("ホバー履歴"), div(defs.lp(model.hoverList, item => div(item.code))), textarea({ props: { value: lianMon }, style: { width: "100%", height: "20em" } }));
    };
})(UI || (UI = {}));
export const Map = UI.Map;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vdHMtc3JjL2VxL21hcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQzdELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNoRCxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ3BDLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFFeEIsTUFBTSxJQUFJLEdBQUcsQ0FBRSxLQUFjLEVBQUUsR0FBWSxFQUFFLEdBQVksRUFBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBRSxHQUFHLEVBQUUsS0FBSyxDQUFFLENBQUUsQ0FBQztBQUd2RyxNQUFNLE9BQU8sR0FBRyxHQUFHLENBQUM7QUFFcEIsV0FBVztBQUVYLElBQVUsS0FBSyxDQWlIZDtBQWpIRCxXQUFVLEtBQUs7SUFFZCxNQUFhLEdBQUc7UUFFZixXQUFXO1FBRVgsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFtQixJQUFJLENBQUUsQ0FBQztRQUM1QyxJQUFJLENBQWU7UUFDbkIsTUFBTSxDQUFvQjtRQUUxQixNQUFNO1FBRU4sS0FBSyxHQUFHLElBQUksSUFBSSxDQUFtQixJQUFJLENBQUUsQ0FBQztRQUMxQyxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFFLEVBQUUsQ0FBRSxDQUFDO1FBQ2xDLFdBQVcsR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUUsRUFBRSxDQUFFLENBQUM7UUFFcEMsU0FBUyxHQUFHLElBQUksSUFBYSxDQUFFO1FBQy9CLFdBQVcsR0FBRyxJQUFJLElBQWEsQ0FBRTtRQUVqQyxTQUFTLEdBQUcsSUFBSSxDQUFDLE1B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