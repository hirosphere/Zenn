import { Branch, ef, Leafr, Leaf, _setvalue } from "../meh/index.js";
const mkleaf = (lol, owner) => {
    return lol instanceof Leaf ? lol : new Leaf(owner, lol);
};
const deftol = (v) => String(v);
export class VM extends Branch {
    title;
    value;
    unit;
    min;
    max;
    step;
    tol;
    labelvalue = new Leafr.String(this, "lvvvv");
    constructor(owner, a) {
        super(owner);
        Leafr.make;
        Leaf.make;
        this.title = mkleaf(a.title ?? "", this);
        this.value = mkleaf(a.value ?? 0, this);
        this.unit = mkleaf(a.unit ?? "", this);
        this.min = mkleaf(a.min ?? 0, this);
        this.max = mkleaf(a.max ?? 100, this);
        this.step = mkleaf(a.step ?? 1, this);
        this.tol = Leaf.make(this, a.tol ?? deftol);
        this.update();
    }
    update() {
        this.labelvalue[_setvalue](this.tol.val(this.value.val));
    }
}
export const UI = (vm) => {
    const { value, min, max, step } = vm;
    const inputact = (ev) => {
        if (!(ev.target instanceof HTMLInputElement))
            return;
        value.set(Number(ev.target.value));
    };
    return ef.section({ class: "range" }, ef.span({ class: "_title" }, vm.title), ef.input({
        class: "_input",
        attrs: { type: "range" },
        props: { value, min, max, step },
        acts: { input: inputact }
    }), ef.span({ class: "_valueunit" }, ef.span({ class: "_value" }, vm.labelvalue), ef.span({ class: "_unit" }, vm.unit)));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidWktcmFuZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi90cy1zcmMvaHNsLXF1ZXN0L3VpLXJhbmdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBUyxNQUFNLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFZNUUsTUFBTSxNQUFNLEdBQUcsQ0FBUSxHQUFvQixFQUFFLEtBQWEsRUFBRyxFQUFFO0lBRTlELE9BQU8sR0FBRyxZQUFZLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBUyxLQUFLLEVBQUUsR0FBRyxDQUFFLENBQUM7QUFDbEUsQ0FBQyxDQUFDO0FBa0JGLE1BQU0sTUFBTSxHQUFHLENBQUUsQ0FBVSxFQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUUsQ0FBQyxDQUFFLENBQUM7QUFFN0MsTUFBTSxPQUFPLEVBQUcsU0FBUSxNQUFNO0lBRTdCLEtBQUssQ0FBRTtJQUFDLEtBQUssQ0FBRTtJQUFDLElBQUksQ0FBRTtJQUFDLEdBQUcsQ0FBRTtJQUFDLEdBQUcsQ0FBRTtJQUFDLElBQUksQ0FBRTtJQUFDLEdBQUcsQ0FBQztJQUU5QyxVQUFVLEdBQUcsSUFBSyxLQUFLLENBQUMsTUFBTSxDQUFFLElBQUksRUFBRSxPQUFPLENBQUUsQ0FBQztJQUVoRCxZQUFhLEtBQWEsRUFBRSxDQUFvQjtRQUUvQyxLQUFLLENBQUUsS0FBSyxDQUFFLENBQUM7UUFFZixLQUFLLENBQUMsSUFBSSxDQUFDO1FBQ1gsSUFBSSxDQUFDLElBQUksQ0FBQztRQUVWLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksRUFBRSxFQUFFLElBQUksQ0FBRSxDQUFDO1FBQzNDLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBRSxDQUFDO1FBQzFDLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRSxFQUFFLElBQUksQ0FBRSxDQUFDO1FBQ3pDLElBQUksQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBRSxDQUFDO1FBQ3RDLElBQUksQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxFQUFFLElBQUksQ0FBRSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBRSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxNQUFNLENBQUUsQ0FBQztRQUU5QyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDZixDQUFDO0lBRWUsTUFBTTtRQUVyQixJQUFJLENBQUMsVUFBVSxDQUFFLFNBQVMsQ0FBRSxDQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFFLENBQUUsQ0FBQztJQUNoRSxDQUFDO0NBQ0Q7QUFFRCxNQUFNLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBRSxFQUFPLEVBQUcsRUFBRTtJQUUvQixNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDO0lBRXJDLE1BQU0sUUFBUSxHQUFHLENBQUUsRUFBVSxFQUFHLEVBQUU7UUFFakMsSUFBSSxDQUFFLENBQUUsRUFBRSxDQUFDLE1BQU0sWUFBWSxnQkFBZ0IsQ0FBRTtZQUFJLE9BQU87UUFFMUQsS0FBSyxDQUFDLEdBQUcsQ0FBRSxNQUFNLENBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUUsQ0FBRSxDQUFDO0lBQ3hDLENBQUMsQ0FBQTtJQUVELE9BQU8sRUFBRSxDQUFDLE9BQU8sQ0FFaEIsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBRWxCLEVBQUUsQ0FBQyxJQUFJLENBQUUsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBRSxFQUN4QyxFQUFFLENBQUMsS0FBSyxDQUVQO1FBQ0MsS0FBSyxFQUFFLFFBQVE7UUFDZixLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFO1FBQ3hCLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRTtRQUNoQyxJQUFJLEVBQUUsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFO0tBQ3pCLENBQ0QsRUFDRCxFQUFFLENBQUMsSUFBSSxDQUVOLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxFQUV2QixFQUFFLENBQUMsSUFBSSxDQUFFLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUUsRUFDN0MsRUFBRSxDQUFDLElBQUksQ0FBRSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFFLENBQ3RDLENBQ0QsQ0FBQztBQUNILENBQUMsQ0FBQyJ9