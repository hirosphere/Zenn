import { dom, ef, each, root, log } from "../meh/index.js";
const ents = Object.entries;
log("kadai-danchi-1 main");
const App = async () => {
    const params = new URLSearchParams(location.search);
    const roomlabel = params.get("page") ?? "";
    const room = danchimap.get(roomlabel);
    log("room", roomlabel, room);
    if (room) {
        const module = await import(room.url);
        const Page = module.default;
        log("dymport", Page);
        if (Page)
            return Page(room.label);
    }
    return DanchiMap(params);
};
const DanchiMap = (ps) => {
    // const ps = new URLSearchParams( "?a=111&b=2222" );
    log(ps, ps.entries());
    Object.entries(ps).forEach(e => log("forEach", e));
    return ef.main({}, ef.h1("課題団地"), ef.h2("Meh"), ef.p("HTML Single Page App Framework"), ef.table(each(Array.from(ps.entries()), ([name, value]) => ef.tr(ef.td(name), ef.td(value)))), ef.section(ef.textarea({ props: { value: "Danchi" } })));
};
const unavailable = true;
const danchimapsrc = {
    "1": {
        "1": {
            "101": {},
        },
    },
};
class Building // 棟
 {
    rooms = {};
}
class Block // 街区
 {
    buildings = {};
}
const danchimap = new class {
    constructor() {
        for (const [block_i, block_src] of ents(danchimapsrc)) {
            const label = block_i;
            log("街区", label);
            const block = new Block();
            this.blocks[block_i] = block;
            for (const [building_i, buil_src] of ents(block_src)) {
                const label = [block_i, building_i].join("-");
                log("団地棟", label);
                const building = new Building();
                for (const [room_i, room_src] of ents(buil_src)) {
                    const path = [block_i, building_i, room_i];
                    const label = path.join("-");
                    const room = { label, url: `./${path.join("/")}.js` };
                    building.rooms[room_i] = room;
                    this.rooms[label] = room;
                    log("団地部屋", label, room.url);
                }
            }
        }
    }
    blocks = {};
    rooms = {};
    get(index) { return this.rooms[index]; }
};
dom.create(root, await App(), "body");
export const dummy = {};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3RzLXNyYy9rYWRhaS1kYW5jaGktMS9tYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBZSxHQUFHLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFeEUsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQztBQUU1QixHQUFHLENBQUUscUJBQXFCLENBQUUsQ0FBQztBQUk3QixNQUFNLEdBQUcsR0FBRyxLQUFLLElBQUksRUFBRTtJQUV0QixNQUFNLE1BQU0sR0FBRyxJQUFJLGVBQWUsQ0FBRSxRQUFRLENBQUMsTUFBTSxDQUFFLENBQUM7SUFFdEQsTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBRSxNQUFNLENBQUUsSUFBSSxFQUFFLENBQUM7SUFDN0MsTUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBRSxTQUFTLENBQUUsQ0FBQztJQUV4QyxHQUFHLENBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUUsQ0FBQztJQUUvQixJQUFJLElBQUksRUFDUjtRQUNDLE1BQU0sTUFBTSxHQUFHLE1BQU0sTUFBTSxDQUFFLElBQUksQ0FBQyxHQUFHLENBQUUsQ0FBQztRQUN4QyxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQzVCLEdBQUcsQ0FBRSxTQUFTLEVBQUUsSUFBSSxDQUFFLENBQUM7UUFDdkIsSUFBSSxJQUFJO1lBQUcsT0FBTyxJQUFJLENBQUUsSUFBSSxDQUFDLEtBQUssQ0FBRSxDQUFDO0tBQ3JDO0lBRUQsT0FBTyxTQUFTLENBQUUsTUFBTSxDQUFFLENBQUM7QUFDNUIsQ0FBQyxDQUFDO0FBRUYsTUFBTSxTQUFTLEdBQUcsQ0FBRSxFQUFvQixFQUFHLEVBQUU7SUFFNUMscURBQXFEO0lBRXJELEdBQUcsQ0FBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFFLENBQUM7SUFFeEIsTUFBTSxDQUFDLE9BQU8sQ0FBRSxFQUFFLENBQUUsQ0FBQyxPQUFPLENBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUUsU0FBUyxFQUFFLENBQUMsQ0FBRSxDQUFFLENBQUM7SUFFekQsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUViLEVBQUUsRUFFRixFQUFFLENBQUMsRUFBRSxDQUFFLE1BQU0sQ0FBRSxFQUNmLEVBQUUsQ0FBQyxFQUFFLENBQUUsS0FBSyxDQUFFLEVBQ2QsRUFBRSxDQUFDLENBQUMsQ0FBRSxnQ0FBZ0MsQ0FBRSxFQUV4QyxFQUFFLENBQUMsS0FBSyxDQUVQLElBQUksQ0FFSCxLQUFLLENBQUMsSUFBSSxDQUFFLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBRSxFQUUxQixDQUFFLENBQUUsSUFBSSxFQUFFLEtBQUssQ0FBRSxFQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUUzQixFQUFFLENBQUMsRUFBRSxDQUFFLElBQUksQ0FBRSxFQUNiLEVBQUUsQ0FBQyxFQUFFLENBQUUsS0FBSyxDQUFFLENBQ2QsQ0FDRCxDQUNELEVBRUQsRUFBRSxDQUFDLE9BQU8sQ0FBRSxFQUFFLENBQUMsUUFBUSxDQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxFQUFFLENBQUUsQ0FBRSxDQUMzRCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDO0FBRXpCLE1BQU0sWUFBWSxHQUNsQjtJQUNDLEdBQUcsRUFDSDtRQUNDLEdBQUcsRUFDSDtZQUNDLEtBQUssRUFBRSxFQUFFO1NBQ1Q7S0FDRDtDQUNELENBQUM7QUFJRixNQUFNLFFBQVEsQ0FBQyxJQUFJOztJQUVsQixLQUFLLEdBQTZCLEVBQUUsQ0FBQztDQUNyQztBQUVELE1BQU0sS0FBSyxDQUFDLEtBQUs7O0lBRWhCLFNBQVMsR0FBZ0MsRUFBRSxDQUFDO0NBQzVDO0FBRUQsTUFBTSxTQUFTLEdBQUcsSUFBSTtJQUVyQjtRQUVDLEtBQUssTUFBTSxDQUFFLE9BQU8sRUFBRSxTQUFTLENBQUUsSUFBSSxJQUFJLENBQUUsWUFBWSxDQUFFLEVBQ3pEO1lBQ0MsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDO1lBRXRCLEdBQUcsQ0FBRSxJQUFJLEVBQUUsS0FBSyxDQUFFLENBQUM7WUFFbkIsTUFBTSxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztZQUMxQixJQUFJLENBQUMsTUFBTSxDQUFFLE9BQU8sQ0FBRSxHQUFHLEtBQUssQ0FBQztZQUUvQixLQUFLLE1BQU0sQ0FBRSxVQUFVLEVBQUUsUUFBUSxDQUFFLElBQUksSUFBSSxDQUFFLFNBQVMsQ0FBRSxFQUN4RDtnQkFDQyxNQUFNLEtBQUssR0FBRyxDQUFFLE9BQU8sRUFBRSxVQUFVLENBQUUsQ0FBQyxJQUFJLENBQUUsR0FBRyxDQUFFLENBQUM7Z0JBRWxELEdBQUcsQ0FBRSxLQUFLLEVBQUUsS0FBSyxDQUFFLENBQUM7Z0JBRXBCLE1BQU0sUUFBUSxHQUFHLElBQUksUUFBUSxFQUFFLENBQUM7Z0JBRWhDLEtBQUssTUFBTSxDQUFFLE1BQU0sRUFBRSxRQUFRLENBQUUsSUFBSSxJQUFJLENBQUUsUUFBUSxDQUFFLEVBQ25EO29CQUNDLE1BQU0sSUFBSSxHQUFHLENBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLENBQUUsQ0FBQztvQkFFN0MsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBRSxHQUFHLENBQUUsQ0FBQztvQkFDL0IsTUFBTSxJQUFJLEdBQUcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQU0sSUFBSSxDQUFDLElBQUksQ0FBRSxHQUFHLENBQUcsS0FBSyxFQUFFLENBQUM7b0JBRTFELFFBQVEsQ0FBQyxLQUFLLENBQUUsTUFBTSxDQUFFLEdBQUcsSUFBSSxDQUFDO29CQUVoQyxJQUFJLENBQUMsS0FBSyxDQUFFLEtBQUssQ0FBRSxHQUFHLElBQUksQ0FBQztvQkFFM0IsR0FBRyxDQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBRSxDQUFDO2lCQUUvQjthQUNEO1NBQ0Q7SUFDRixDQUFDO0lBRUQsTUFBTSxHQUE4QixFQUFFLENBQUM7SUFDdkMsS0FBSyxHQUE2QixFQUFFLENBQUM7SUFFckMsR0FBRyxDQUFFLEtBQWMsSUFBd0IsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFFLEtBQUssQ0FBRSxDQUFBLENBQUMsQ0FBQztDQUN2RSxDQUFDO0FBRUYsR0FBRyxDQUFDLE1BQU0sQ0FBRSxJQUFJLEVBQUUsTUFBTSxHQUFHLEVBQUUsRUFBRSxNQUFNLENBQUUsQ0FBQztBQUV4QyxNQUFNLENBQUMsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDIn0=