import { dom, ef, each, root, log } from "../meh/index.js";
import * as models from "./models.js";
import { map as mapsrc } from "./danchi-map.js";
log("kadai-danchi-1 main");
const App = async () => {
    const params = new URLSearchParams(location.search);
    const danchi = new models.Danchi(mapsrc);
    const roompath = params.get("room") ?? "";
    const room = danchi.rooms[roompath];
    log("room", roompath, room);
    if (room) {
        try {
            const module = await import(room.mod_path);
            const Page = module.default;
            log("dymport", Page);
            if (Page)
                return Page(room.index);
        }
        catch (err) {
            log(err);
        }
    }
    return DanchiMap(params);
};
const DanchiMap = (ps) => {
    return ef.main({}, ef.h1("課題団地"), ef.table(each(Array.from(ps.entries()), ([name, value]) => ef.tr(ef.td(name), ef.td(value)))), ef.section({ props: {}, attrs: {}, style: { display: "flex", gap: "1ex", } }), ef.section(ef.textarea({ props: { value: "Danchi" } })));
};
const Link = (room) => {
    return ef.a({ attrs: { href: room?.link ?? "" }, style: {} }, room?.index ?? "---");
};
dom.create(root, await App(), "body");
export const dummy = {};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3RzLXNyYy9rYWRhaS1kYW5jaGktMS9tYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBZSxHQUFHLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDeEUsT0FBTyxLQUFLLE1BQU0sTUFBTSxhQUFhLENBQUM7QUFDdEMsT0FBTyxFQUFFLEdBQUcsSUFBSSxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUVoRCxHQUFHLENBQUUscUJBQXFCLENBQUUsQ0FBQztBQUU3QixNQUFNLEdBQUcsR0FBRyxLQUFLLElBQUksRUFBRTtJQUV0QixNQUFNLE1BQU0sR0FBRyxJQUFJLGVBQWUsQ0FBRSxRQUFRLENBQUMsTUFBTSxDQUFFLENBQUM7SUFFdEQsTUFBTSxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFFLE1BQU0sQ0FBRSxDQUFDO0lBRTNDLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUUsTUFBTSxDQUFFLElBQUksRUFBRSxDQUFDO0lBQzVDLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUUsUUFBUSxDQUFFLENBQUM7SUFFdEMsR0FBRyxDQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFFLENBQUM7SUFFOUIsSUFBSSxJQUFJLEVBQ1I7UUFDQyxJQUNBO1lBQ0MsTUFBTSxNQUFNLEdBQUcsTUFBTSxNQUFNLENBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBRSxDQUFDO1lBQzdDLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7WUFFNUIsR0FBRyxDQUFFLFNBQVMsRUFBRSxJQUFJLENBQUUsQ0FBQztZQUV2QixJQUFJLElBQUk7Z0JBQUcsT0FBTyxJQUFJLENBQUUsSUFBSSxDQUFDLEtBQUssQ0FBRSxDQUFDO1NBQ3JDO1FBQ0QsT0FBTyxHQUFHLEVBQUc7WUFBRSxHQUFHLENBQUUsR0FBRyxDQUFDLENBQUM7U0FBRTtLQUUzQjtJQUVELE9BQU8sU0FBUyxDQUFFLE1BQU0sQ0FBRSxDQUFDO0FBQzVCLENBQUMsQ0FBQztBQUVGLE1BQU0sU0FBUyxHQUFHLENBQUUsRUFBb0IsRUFBRyxFQUFFO0lBRTVDLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FFYixFQUFFLEVBRUYsRUFBRSxDQUFDLEVBQUUsQ0FBRSxNQUFNLENBQUUsRUFFZixFQUFFLENBQUMsS0FBSyxDQUVQLElBQUksQ0FFSCxLQUFLLENBQUMsSUFBSSxDQUFFLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBRSxFQUUxQixDQUFFLENBQUUsSUFBSSxFQUFFLEtBQUssQ0FBRSxFQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUUzQixFQUFFLENBQUMsRUFBRSxDQUFFLElBQUksQ0FBRSxFQUNiLEVBQUUsQ0FBQyxFQUFFLENBQUUsS0FBSyxDQUFFLENBQ2QsQ0FDRCxDQUNELEVBR0QsRUFBRSxDQUFDLE9BQU8sQ0FFVCxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxLQUFLLEdBQUksRUFBRSxDQUdsRSxFQUVELEVBQUUsQ0FBQyxPQUFPLENBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsRUFBRSxDQUFFLENBQUUsQ0FDM0QsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sSUFBSSxHQUFHLENBQUUsSUFBb0IsRUFBRyxFQUFFO0lBRXZDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FFVixFQUFFLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxJQUFJLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxJQUFJLEtBQUssQ0FDdEUsQ0FBQztBQUNILENBQUMsQ0FBQztBQUVGLEdBQUcsQ0FBQyxNQUFNLENBQUUsSUFBSSxFQUFFLE1BQU0sR0FBRyxFQUFFLEVBQUUsTUFBTSxDQUFFLENBQUM7QUFFeEMsTUFBTSxDQUFDLE1BQU0sS0FBSyxHQUFHLEVBQUUsQ0FBQyJ9