const ents = Object.entries;
const vals = Object.values;
class Node {
    index;
    path;
    constructor(index, con) {
        this.index = index;
        this.path = (con ? con.path + "-" : "") + index;
    }
}
export class Room extends Node {
    constructor(index, src, con, rooms) {
        super(index, con);
        // log( this.path, "部屋" );
        this.link = `?room=${this.path}`;
        this.mod_path = `./${this.path.replace(/-/g, "/")}.js`;
        rooms[this.path] = this;
    }
    link;
    mod_path;
}
export class Building extends Node {
    constructor(index, src, con, rooms) {
        super(index, con);
        // log( this.path, "棟" );
        for (const [pindex, psrc] of ents(src.rooms)) {
            this.parts[pindex] = new Room(pindex, psrc, this, rooms);
        }
    }
    parts = {};
}
export class Block extends Node {
    constructor(index, src, rooms) {
        super(index);
        // log( this.path, "街区" );
        for (const [pindex, psrc] of ents(src.buildings)) {
            this.parts[pindex] = new Building(pindex, psrc, this, rooms);
        }
    }
    parts = {};
}
export class Danchi {
    parts = {};
    constructor(src) {
        for (const [pindex, psrc] of ents(src.blocks)) {
            this.parts[pindex] = new Block(pindex, psrc, this.rooms);
        }
    }
    rooms = {};
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vdHMtc3JjL2thZGFpLWRhbmNoaS0xL21vZGVscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO0FBQzVCLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFpQzNCLE1BQU0sSUFBSTtJQUlXO0lBRnBCLElBQUksQ0FBVTtJQUVkLFlBQW9CLEtBQW1CLEVBQUUsR0FBWTtRQUFqQyxVQUFLLEdBQUwsS0FBSyxDQUFjO1FBRXRDLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUUsR0FBRyxLQUFLLENBQUM7SUFDbkQsQ0FBQztDQUNEO0FBRUQsTUFBTSxPQUFPLElBQUssU0FBUSxJQUFJO0lBRTdCLFlBQWEsS0FBbUIsRUFBRSxHQUFnQixFQUFFLEdBQVUsRUFBRSxLQUFtQjtRQUVsRixLQUFLLENBQUUsS0FBSyxFQUFFLEdBQUcsQ0FBRSxDQUFDO1FBRXBCLDBCQUEwQjtRQUUxQixJQUFJLENBQUMsSUFBSSxHQUFHLFNBQVUsSUFBSSxDQUFDLElBQUssRUFBRSxDQUFDO1FBQ25DLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBTSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBRSxJQUFJLEVBQUUsR0FBRyxDQUFHLEtBQUssQ0FBQztRQUUzRCxLQUFLLENBQUUsSUFBSSxDQUFDLElBQUksQ0FBRSxHQUFHLElBQUksQ0FBQztJQUMzQixDQUFDO0lBRUQsSUFBSSxDQUFXO0lBQ2YsUUFBUSxDQUFXO0NBQ25CO0FBRUQsTUFBTSxPQUFPLFFBQVMsU0FBUSxJQUFJO0lBRWpDLFlBQWEsS0FBbUIsRUFBRSxHQUFvQixFQUFFLEdBQVUsRUFBRSxLQUFtQjtRQUV0RixLQUFLLENBQUUsS0FBSyxFQUFFLEdBQUcsQ0FBRSxDQUFDO1FBRXBCLHlCQUF5QjtRQUV6QixLQUFLLE1BQU0sQ0FBRSxNQUFNLEVBQUUsSUFBSSxDQUFFLElBQUksSUFBSSxDQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUUsRUFDaEQ7WUFDQyxJQUFJLENBQUMsS0FBSyxDQUFFLE1BQU0sQ0FBRSxHQUFHLElBQUksSUFBSSxDQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBRSxDQUFDO1NBQzdEO0lBQ0YsQ0FBQztJQUVELEtBQUssR0FBa0MsRUFBRSxDQUFDO0NBQzFDO0FBRUQsTUFBTSxPQUFPLEtBQU0sU0FBUSxJQUFJO0lBRTlCLFlBQWEsS0FBbUIsRUFBRSxHQUFpQixFQUFFLEtBQW1CO1FBRXZFLEtBQUssQ0FBRSxLQUFLLENBQUUsQ0FBQztRQUVmLDBCQUEwQjtRQUUxQixLQUFLLE1BQU0sQ0FBRSxNQUFNLEVBQUUsSUFBSSxDQUFFLElBQUksSUFBSSxDQUFFLEdBQUcsQ0FBQyxTQUFTLENBQUUsRUFDcEQ7WUFDQyxJQUFJLENBQUMsS0FBSyxDQUFFLE1BQU0sQ0FBRSxHQUFHLElBQUksUUFBUSxDQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBRSxDQUFDO1NBQ2pFO0lBQ0YsQ0FBQztJQUVELEtBQUssR0FBc0MsRUFBRSxDQUFDO0NBQzlDO0FBRUQsTUFBTSxPQUFPLE1BQU07SUFFbEIsS0FBSyxHQUFtQyxFQUFFLENBQUM7SUFFM0MsWUFBYSxHQUFrQjtRQUU5QixLQUFLLE1BQU0sQ0FBRSxNQUFNLEVBQUUsSUFBSSxDQUFFLElBQUksSUFBSSxDQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUUsRUFDakQ7WUFDQyxJQUFJLENBQUMsS0FBSyxDQUFFLE1BQU0sQ0FBRSxHQUFHLElBQUksS0FBSyxDQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBRSxDQUFDO1NBQzdEO0lBQ0YsQ0FBQztJQUVELEtBQUssR0FBaUIsRUFBRSxDQUFBO0NBQ3hCIn0=